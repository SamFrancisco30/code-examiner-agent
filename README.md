# Python Online Code Execution System

Our Python Online Testing Platform is a cutting-edge educational tool that allows users to write code within a dedicated environment to solve various programming problems. The platform is designed to provide a comprehensive learning experience by closely monitoring users' coding activities and offering personalized learning advice generated by an intelligent agent.

## System Architecture

The system consists of two main components:

1. **Frontend**: Built with React, integrating the Monaco Editor as the code editor.
2. **Backend**: Built with Python/FastAPI, providing a code execution API to run Python code submitted by users in a secure environment.

## Key Features

- An aesthetically pleasing code editor supporting syntax highlighting and auto-indentation.
- Real-time code execution with quick results.
- A secure code execution environment with resource usage and execution time limits.
- Clear error message display.
- A responsive design compatible with different devices.

## Installation Steps

### Prerequisites

- Node.js (v14+)
- Python 3.10+
- Redis service running in the background
- pnpm package manager
    - It is recommended to use npm to install `pnpm` on Windows: `npm install -g pnpm`
    - You may need to select Command Prompt when using the terminal in VSCode:
    ![pic1](imgs/image.png)

### Frontend Installation

```bash
# Navigate to the frontend directory
cd code-examiner-agent/frontend

# Install dependencies
pnpm install

# Start the development server
pnpm run dev
```

#### Connecting the Frontend to the Database
Create a `.env` file in the `code-examiner-agent/frontend` directory, following the format of `.env.example`, and fill in the KEY.


### Backend Installation
```bash
# Navigate to the backend directory
cd code-examiner-agent/backend

# Create and activate a virtual environment
python -m venv venv
source venv/bin/activate  # Linux/Mac
# or venv\Scripts\activate  # Windows

# Install dependencies
pip install fastapi uvicorn pydantic python-multipart redis pika python-dotenv langchain langgraph langchain-openai langchain-mcp-adapters supabase

# Run Redis and RabbitMQ
docker-compose up -d

# Back to the root directory
cd ..

# Start the backend server
python -m uvicorn backend.main:app --host 0.0.0.0 --port 8000
```


## Usage Instructions

1. Start the frontend and backend servers.
2. Access `http://localhost:5173/` in your browser.
3. Write Python code in the code editor.
4. Click the "Execute Code" button to run the code.
5. View the execution results or error messages.

## Security Measures

The backend implements multiple security measures to protect the server:

- Code execution in an isolated environment.
- CPU time limit (5 seconds).
- Memory usage limit (128MB).
- Output size limit (1MB).
- Execution timeout handling.

## Project Structure

```
python-code-executor/
├── frontend/                # React frontend project
│   ├── src/
│   │   ├── components/      # React components
│   │   │   ├── CodeEditor.jsx  # Code editor component
│   │   │   └── CodeEditor.css  # Editor styles
│   │   ├── App.tsx          # Main application component
│   │   ├── App.css          # Application styles
│   │   └── main.tsx         # Entry file
│   └── package.json         # Frontend dependency configuration
└── backend/                 # FastAPI backend project
    ├── main.py              # Main application file containing API definitions
    └── test_api.sh          # API test script
```

## Expansion Possibilities
- Add a user account system to save code history.
- Support more programming languages.
- Add file upload and download functions.
- Implement a code sharing feature.
- Integrate more Python libraries and frameworks.

## Troubleshooting
- If the frontend cannot connect to the backend, ensure that the backend server is running and check the CORS configuration.
- If code execution times out, there may be an infinite loop or time-consuming operation in the code.
- If you encounter a memory limit error, try optimizing the code or reducing the amount of data processed.
